import{u as B,v as q,y as M,z as L,A as S,B as Y,x as A,C as P,D as $,E as T,h as z,q as N,r as O,s as j}from"./element-plus.b62f9210.js";import{_ as R}from"./index.b813fded.js";import{E as Q,r as V,Y as c,f as G,o as C,c as F,a as D,T as a,R as o,a7 as f,O as I,a6 as H,e as J,Q as K}from"./@vue.a2b9f58e.js";import"./dayjs.37d5d2cb.js";import"./@vueuse.f6cb2060.js";import"./@element-plus.e1f7ef58.js";import"./lodash-es.26478009.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./vue-router.035f3658.js";import"./js-cookie.31874410.js";import"./vuex.f294759a.js";import"./mockjs.cf4a13f7.js";import"./axios.754b77ca.js";import"./form-data.2b153385.js";const W=Q({setup(){const{proxy:e}=J(),t=V([]),U=c([{prop:"name",label:"\u59D3\u540D"},{prop:"age",label:"\u5E74\u9F84"},{prop:"sexLabel",label:"\u6027\u522B"},{prop:"birth",label:"\u51FA\u751F\u65E5\u671F"},{prop:"addr",label:"\u5730\u5740",width:400}]),n=c({page:1,total:0,name:""}),g=c({keyword:""}),v=c({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"}],age:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E74\u9F84"},{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57"}],sex:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B",trigger:"change"}],birth:[{required:!0,message:"\u8BF7\u9009\u62E9\u65E5\u671F"}],addr:[{required:!0,message:"\u8BF7\u8F93\u5165\u5730\u5740"}]}),d=()=>{n.name=g.keyword,r(n)},u=l=>{n.page=l,r(n)};G(()=>{r(n)});const r=async l=>{let p=await e.$api.getUserData(l);t.value=p.list.map(y=>(y.sexLabel=y.sex===0?"\u5973":"\u7537",y)),l.total=p.count},s=V(!1),i=c({name:"",age:"",sex:"",birth:"",addr:""}),h=async()=>{e.$refs.userForm.validate(async l=>{l&&(m.value==="add"?await e.$api.addUser(i)&&(s.value=!1,e.$refs.userForm.resetFields(),r(n)):await e.$api.editUser(i)&&(s.value=!1,r(n)))})},_=()=>{s.value=!1,e.$refs.userForm.resetFields(),r(n)},b=()=>{$.confirm("\u662F\u5426\u786E\u8BA4\u5173\u95ED").then(()=>{s.value=!1,e.$refs.userForm.resetFields(),done()}).catch(()=>{})},m=V("add");return{list:t,tableLabel:U,config:n,changePage:u,formInline:g,handleSearch:d,dialogVisible:s,formUser:i,onSubmit:h,rules:v,handleCancel:_,handleClose:b,action:m,handleEdit:l=>{m.value="edit",s.value=!0,Object.assign(i,l)},handleAdd:()=>{m.value="add",s.value=!0},handleDelete:l=>{$.confirm("\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F").then(async()=>{await e.$api.deleteUser({id:l.id}),T({showClose:!0,message:"\u5220\u9664\u6210\u529F",type:"success"}),r(n)}).catch(()=>{})}}}}),X={class:"user-header"},Z={class:"table"};function x(e,t,U,n,g,v){const d=z,u=N,r=O,s=j,i=B,h=q,_=M,b=L,m=S,k=Y,w=A,E=P;return C(),F(I,null,[D("div",X,[a(d,{type:"primary",onClick:e.handleAdd},{default:o(()=>[f("+\u65B0\u589E")]),_:1},8,["onClick"]),a(s,{inline:!0,model:e.formInline},{default:o(()=>[a(r,null,{default:o(()=>[a(u,{modelValue:e.formInline.keyword,"onUpdate:modelValue":t[0]||(t[0]=l=>e.formInline.keyword=l),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1}),a(r,null,{default:o(()=>[a(d,{type:"primary",onClick:e.handleSearch},{default:o(()=>[f("\u641C\u7D22")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),D("div",Z,[a(h,{data:e.list,style:{width:"100%"},height:"620"},{default:o(()=>[(C(!0),F(I,null,H(e.tableLabel,l=>(C(),K(i,{key:l.prop,prop:l.prop,label:l.label,width:l.width?l.width:160},null,8,["prop","label","width"]))),128)),a(i,{fixed:"right",label:"\u64CD\u4F5C"},{default:o(l=>[a(d,{size:"small",onClick:p=>e.handleEdit(l.row)},{default:o(()=>[f("\u7F16\u8F91")]),_:2},1032,["onClick"]),a(d,{type:"danger",size:"small",onClick:p=>e.handleDelete(l.row)},{default:o(()=>[f("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(_,{class:"page",small:"",background:"",layout:"prev, pager, next",total:e.config.total,onCurrentChange:e.changePage},null,8,["total","onCurrentChange"])]),a(E,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=l=>e.dialogVisible=l),title:e.action==="add"?"\u65B0\u589E\u7528\u6237":"\u7F16\u8F91\u7528\u6237",width:"38%","before-close":e.handleClose},{default:o(()=>[a(s,{inline:!0,model:e.formUser,ref:"userForm",rules:e.rules},{default:o(()=>[a(r,{label:"\u59D3\u540D",prop:"name"},{default:o(()=>[a(u,{modelValue:e.formUser.name,"onUpdate:modelValue":t[1]||(t[1]=l=>e.formUser.name=l),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u5E74\u9F84",prop:"age"},{default:o(()=>[a(u,{modelValue:e.formUser.age,"onUpdate:modelValue":t[2]||(t[2]=l=>e.formUser.age=l),modelModifiers:{number:!0},placeholder:"\u8BF7\u8F93\u5165\u5E74\u9F84"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u6027\u522B",prop:"sex"},{default:o(()=>[a(m,{modelValue:e.formUser.sex,"onUpdate:modelValue":t[3]||(t[3]=l=>e.formUser.sex=l),placeholder:"\u8BF7\u9009\u62E9\u6027\u522B"},{default:o(()=>[a(b,{label:"\u7537",value:0}),a(b,{label:"\u5973",value:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u51FA\u751F\u65E5\u671F",prop:"birth"},{default:o(()=>[a(k,{modelValue:e.formUser.birth,"onUpdate:modelValue":t[4]||(t[4]=l=>e.formUser.birth=l),type:"date",placeholder:"\u8BF7\u9009\u62E9\u65E5\u671F",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u5730\u5740",style:{width:"90%"},prop:"addr"},{default:o(()=>[a(u,{modelValue:e.formUser.addr,"onUpdate:modelValue":t[5]||(t[5]=l=>e.formUser.addr=l),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),a(w,{style:{"justify-content":"flex-end"}},{default:o(()=>[a(r,null,{default:o(()=>[a(d,{type:"primary",onClick:e.handleCancel},{default:o(()=>[f("\u53D6\u6D88")]),_:1},8,["onClick"]),a(d,{type:"primary",onClick:e.onSubmit},{default:o(()=>[f(" \u786E\u5B9A ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","title","before-close"])],64)}const _e=R(W,[["render",x],["__scopeId","data-v-40a419b8"]]);export{_e as default};
